<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Wonbet.vip ‚Äì Crea tu usuario</title>
   <link rel="icon"
        type="image/png"
        sizes="32x32"
        href="images/logo-1.png">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap"
    rel="stylesheet"
  />
  <!-- Lottie Player -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <!-- Stylesheet -->
  <link rel="stylesheet" href="styles.css" />

  <!-- TikTok Pixel Code Start -->
  <script>
    !function (w, d, t) {
      w.TiktokAnalyticsObject=t;
      var ttq=w[t]=w[t]||[];
      ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"];
      ttq.setAndDefer=function(t,e){
        t[e]=function(){
          t.push([e].concat(Array.prototype.slice.call(arguments,0)));
        };
      };
      for(var i=0;i<ttq.methods.length;i++){
        ttq.setAndDefer(ttq,ttq.methods[i]);
      }
      ttq.load=function(e,n){
        var r="https://analytics.tiktok.com/i18n/pixel/events.js";
        ttq._i=ttq._i||{}; ttq._i[e]=[]; ttq._i[e]._u=r;
        ttq._t=ttq._t||{}; ttq._t[e]=+new Date();
        ttq._o=ttq._o||{}; ttq._o[e]=n||{};
        var s=d.createElement("script");
        s.type="text/javascript"; s.async=!0;
        s.src=r+"?sdkid="+e+"&lib="+t;
        var x=d.getElementsByTagName("script")[0];
        x.parentNode.insertBefore(s,x);
      };

      ttq.load('D0N3JARC77UEFAFS8SUG'); // tu TikTok Pixel ID
      ttq.page();
      ttq.track('ViewContent');
    }(window, document, 'ttq');
   </script>
</head>
<body>
</body>
</html>
  <!-- Preloader Overlay -->
  <div id="preloader">
    <lottie-player
      src="videos/slot-machine.json"
      background="transparent"
      speed="1"
      style="width:150px; height:150px;"
      autoplay
      loop
    ></lottie-player>
  </div>

  <!-- Theme Toggle -->
  <button id="themeToggle" aria-label="Cambiar tema" class="theme-toggle">üåô</button>

  <!-- Screen √öNICA -->
  <div class="screen">
    <!-- Form Card -->
    <div class="card">
      <div class="logo">
        <img src="images/logo.png" alt="Logo de Wonbet.vip" />
      </div>
      <h1 class="title">200% EXTRA EN TU CARGA</h1>
      <p class="subtitle">
        <span class="fire">üî•</span>
        ESCRIB√ç TU NOMBRE Y CREA TU USUARIO
        <span class="fire">üî•</span>
      </p>
      <p class="highlight">RETIROS ILIMITADOS</p>
      <div class="input-group">
        <input
          type="text"
          id="username"
          placeholder="ESCRIBI TU NOMBRE"
          autocomplete="off"
        />
      </div>
      <a href="#" id="ctaButton" class="btn">
        ¬°CREA TU USUARIO!
        <img src="images/whatsapp-icon.svg" alt="WhatsApp icon" class="icon" />
      </a>
    </div>

    <!-- Carousel Section -->
    <section class="carousel-section">
      <h2>POPULARES</h2>
      <div class="carousel">
        <ul class="carousel-track" id="track">
          <!-- items 1‚Äì14 -->
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide1.jpg" class="lazy" alt="Slide 1" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide2.jpg" class="lazy" alt="Slide 2" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide3.jpg" class="lazy" alt="Slide 3" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide4.jpg" class="lazy" alt="Slide 4" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide5.jpg" class="lazy" alt="Slide 5" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide6.jpg" class="lazy" alt="Slide 6" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide7.jpg" class="lazy" alt="Slide 7" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide8.jpg" class="lazy" alt="Slide 8" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide9.jpg" class="lazy" alt="Slide 9" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide10.jpg" class="lazy" alt="Slide 10" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide11.jpg" class="lazy" alt="Slide 11" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide12.jpg" class="lazy" alt="Slide 12" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide13.jpg" class="lazy" alt="Slide 13" loading="lazy" /></li>
          <li class="carousel-item"><div class="skeleton"></div><img data-src="images/slide14.jpg" class="lazy" alt="Slide 14" loading="lazy" /></li>


        </ul>
      </div>
      <div class="dots" id="dots"></div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials-section">
      <h2>LO QUE DICEN NUESTROS USUARIOS</h2>
      <div class="testimonials-carousel" id="testimonialsCarousel">
        <!-- testimonials-carousel.js inyecta los items aqu√≠ -->
      </div>
    </section>
  </div>

  <!-- Fallback Mobile Content -->
  <main class="content">
    <section class="info">
      <h2>¬øPor qu√© Mega Cash?</h2>
      <p>Con Wonbet.vip viv√≠s la emoci√≥n de un casino en la palma de tu mano. Bono de bienvenida, retiros inmediatos y soporte 24/7.</p>
    </section>
  </main>

  <!-- Funciones para Meta Pixel + captura de cookies + env√≠o al API -->
  <script>
    const API_URL = 'https://zcdjobivej.execute-api.us-east-2.amazonaws.com/prod/F1-TT';
   const whatsappNumbers = [
  '5491178466905',
  '5491178468225'
];
    const mensajeBase = 'Hola vengo por el 200%!';

     // Lee todas las cookies en un objeto { nombre: valor }
    function parseCookies() {
      return document.cookie
        .split('; ')
        .reduce((acc, kv) => {
          const [name, ...vals] = kv.split('=');
          acc[name] = vals.join('=');
          return acc;
        }, {});
    }

    

      function waitForCookie(name, timeout = 3000) {
      return new Promise(resolve => {
        const interval = 100;
        let waited = 0;
        const timer = setInterval(() => {
          if (document.cookie.split('; ').some(c => c.startsWith(name + '=')) || waited >= timeout) {
            clearInterval(timer);
            resolve();
          }
          waited += interval;
        }, interval);
      });
    }

    // Preloader
    window.addEventListener('load', ()=> {
      const pre = document.getElementById('preloader');
      pre.style.opacity = 0;
      setTimeout(()=> pre.remove(), 600);
    });

    // Theme Toggle
    const toggle = document.getElementById('themeToggle');
    toggle.addEventListener('click', ()=> {
      document.documentElement.classList.toggle('light');
      toggle.textContent = document.documentElement.classList.contains('light') ? 'üåû' : 'üåô';
    });

    // Lazy-load images
    const lazyImgs = [];
    document.querySelectorAll('.lazy').forEach(img => lazyImgs.push(img));
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          const img = e.target;
          img.src = img.dataset.src;
          img.onload = () => img.previousElementSibling.remove();
          obs.unobserve(img);
        }
      });
    }, { rootMargin: '50px' });
    lazyImgs.forEach(img => obs.observe(img));

    // Carousel touch + dots
    (function(){
      const track = document.getElementById('track');
      const items = Array.from(track.children);
      const dots = document.getElementById('dots');
      let current = 0;
      items.forEach((_, i) => {
        const d = document.createElement('button');
        d.className = 'dot' + (i === 0 ? ' active' : '');
        d.addEventListener('click', () => moveTo(i));
        dots.appendChild(d);
      });
      function moveTo(i) {
        const w = items[0].getBoundingClientRect().width + parseFloat(getComputedStyle(track).gap);
        track.style.transform = `translateX(-${w * i}px)`;
        dots.querySelector('.active').classList.remove('active');
        dots.children[i].classList.add('active');
        current = i;
      }
      let startX = 0;
      track.addEventListener('touchstart', e => startX = e.touches[0].pageX);
      track.addEventListener('touchend', e => {
        const diff = startX - e.changedTouches[0].pageX;
        if (Math.abs(diff) > 50) {
          if (diff > 0 && current < items.length - 1) moveTo(current + 1);
          if (diff < 0 && current > 0) moveTo(current - 1);
        }
      });
    })();

    // CTA Button: env√≠o al API y redirecci√≥n a WhatsApp
    document.getElementById('ctaButton').addEventListener('click', async e => {
      e.preventDefault();
      const name = document.getElementById('username').value.trim();
      if (!name) {
        const inp = document.getElementById('username');
        inp.classList.add('shake');
        setTimeout(()=> inp.classList.remove('shake'), 500);
        return;
      }

      // Generar ID y mensaje
      
      const textoCompleto = `${mensajeBase} Mi c√≥digo promocional es: ${id}%0AEste es mi nombre: ${encodeURIComponent(name)}`;

      // Esperar cookies de Meta Pixel
      await Promise.all([ waitForCookie('_fbc'), waitForCookie('_fbp') ]);

      // 2) Leemos las cookies y preparamos payload
      const cookies = parseCookies();
      const id = generateUUID();
      const payload = {
        event:     'ViewContent',
        timestamp: new Date().toISOString(),
        ttclid:    cookies.ttclid   || null,
        _ttp:      cookies._ttp     || null,
        id
      };
      fetch(API_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      }).catch(()=>{ /* silencio */ })
        .finally(() => {
          // Redirecci√≥n a WhatsApp con n√∫mero aleatorio
          const num = whatsappNumbers[Math.floor(Math.random() * whatsappNumbers.length)];
          window.location.href = `https://wa.me/${num}?text=${textoCompleto}`;
        });
    });

  </script>
  <script src="testimonials-carousel.js"></script>
</body>
</html>
